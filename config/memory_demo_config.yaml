# Memory模式联邦学习配置文件
# 单进程内存模拟，最快速度，用于算法开发和调试

federation:
  # 通信模式：memory (内存模拟)
  mode: "memory"
  
  # 服务端配置
  server:
    id: "memory_server"
    
  # 客户端配置
  clients:
    - id: "demo_client_1"
    - id: "demo_client_2"  
    - id: "demo_client_3"

# 训练配置（与Process模式完全相同）
training:
  algorithm: "fedavg"
  rounds: 3
  epochs_per_round: 1
  batch_size: 32
  learning_rate: 0.01
  
  # 客户端选择策略
  client_selection:
    strategy: "all"  # all, random, top_k
    fraction: 1.0
    min_clients: 2

# 模型配置（与Process模式完全相同） 
model:
  type: "simple_linear"
  input_dim: 784
  output_dim: 10
  
# 数据配置（与Process模式完全相同）
data:
  dataset: "mnist"
  distribution: "iid"  # iid, non_iid
  samples_per_client: 1000
  
# 通信配置（Memory模式特有）
communication:
  transport:
    type: "memory"
    timeout: 120.0
    max_retries: 3
    
  # 内存模拟配置
  memory:
    simulate_latency: false  # 是否模拟网络延迟
    latency_ms: 10          # 模拟延迟毫秒数
    simulate_failures: false # 是否模拟网络故障
    failure_rate: 0.01      # 故障率
    
# 日志配置（与Process模式完全相同）
logging:
  level: "INFO"
  file: "logs/memory_federation.log"
  format: "%(asctime)s | %(levelname)s | %(name)s:%(funcName)s:%(lineno)d - %(message)s"
