# ============================================
# 服务端完整配置示例（合并格式）
# ============================================

# ========== 通信配置 ==========
communication:
  mode: "network"           # 通信模式：memory / process / network
  role: "server"            # 角色：server
  node_id: "main_server"    # 服务端ID

  # 传输层配置
  transport:
    type: "websocket"       # 传输类型
    host: "0.0.0.0"         # 监听地址
    port: 8000              # 监听端口
    timeout: 30.0

  # 通信管理配置
  communication:
    rpc:
      timeout: 120.0
    heartbeat:
      interval: 30.0
      timeout: 90.0
    serialization:
      format: "pickle"
      compression: "gzip"

  # 连接管理配置
  connection:
    max_clients: 100
    client_timeout: 300.0

# ========== 训练配置 ==========
training:
  # 组件导入（自定义组件）
  components:
    - "my_project.trainers"
    - "my_project.aggregators"

  # 训练器配置
  trainer:
    name: "FedAvgTrainer"
    params:
      max_rounds: 100
      min_clients: 2

  # 聚合器配置
  aggregator:
    name: "FedAvgAggregator"
    params:
      weight_strategy: "by_sample_size"

  # 检查点配置
  checkpoint:
    enabled: true
    save_frequency: 10
    save_path: "./checkpoints"
