# Network 模式服务端配置（新架构）
# 用于跨机器的联邦学习测试

# ==================== 节点基本信息 ====================
role: server  # 节点角色：server 或 client
mode: network  # 通信模式：memory, process, network
node_id: network_server_main  # 节点ID

# ==================== 传输层配置 ====================
transport:
  type: websocket
  host: "0.0.0.0"  # 监听所有网络接口（允许外部连接）
  port: 8000  # HTTP端口
  websocket_port: 9501  # WebSocket端口
  timeout: 60.0
  retry_attempts: 5
  ssl_enabled: false

# ==================== 通信层配置 ====================
communication:
  heartbeat_interval: 30.0  # 心跳间隔（秒）
  heartbeat_timeout: 90.0  # 心跳超时（秒）
  registration_timeout: 120.0  # 注册超时（秒）
  max_clients: 10  # 最大客户端数量
  rpc_timeout: 180.0  # RPC超时（秒）

# ==================== 训练配置 ====================
training:
  # Trainer配置
  trainer:
    name: FedAvgMNIST  # Trainer名称
    params:
      algorithm: fedavg
      local_epochs: 1
      learning_rate: 0.01
      batch_size: 32

  # 训练参数
  max_rounds: 10
  min_clients: 2  # 最少需要的客户端数量
  clients_per_round: 2  # 每轮参与的客户端数量

  # 全局模型初始化
  global_model:
    model_type: simple
    version: "1.0"
    weights: 1.0
