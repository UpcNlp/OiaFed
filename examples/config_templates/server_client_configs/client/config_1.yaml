# ====================================
# FedCL 客户端1配置
# ====================================
# 基于模板的客户端1具体配置
# 使用默认learner进行基础联邦学习

# 客户端基本信息
client:
  id: "fedcl_client_1"                     # 客户端1唯一标识
  name: "FedCL Client 1"                   # 客户端1名称
  type: "multi_learner"                    # 支持多learner类型

# 通信配置
communication:
  host: "localhost"                        # 服务端地址
  port: 8080                              # 服务端端口
  max_workers: 3                          # 工作线程数
  timeout: 60.0                           # 通信超时时间

# 学习器配置 - 启用默认learner
learners:
  default_learner:
    class: "default"                       # 使用默认learner
    enabled: true                          # 启用此learner
    
    model:
      type: "SimpleMLP"
      input_size: 784
      hidden_sizes: [256, 128]
      num_classes: 10
      dropout_rate: 0.2
      activation: "relu"
      use_batch_norm: false
    
    optimizer:
      type: "SGD"
      lr: 0.01                            # 客户端1使用较低学习率
      momentum: 0.9
      weight_decay: 1e-4
      
    loss_function:
      type: "CrossEntropyLoss"
      
    training:
      local_epochs: 5                      # 本地训练5轮
      batch_size: 32

# 数据配置 - 客户端1数据
training_data:
  client_train_data:
    type: "FederatedDataLoader"
    dataset:
      name: "MNIST"
      path: "data/MNIST"
      split: "train"
      download: true
      transform: "basic"
      
    federated_config:
      client_id: 1                         # 客户端1
      num_clients: 3                       # 总共3个客户端
      distribution: "iid"                  # IID数据分布
      samples_per_client: 1000             # 1000样本
    
    loader_params:
      batch_size: 32
      shuffle: true
      num_workers: 0

# 测试数据配置
test_data:
  client_test_data:
    type: "StandardDataLoader"
    dataset:
      name: "MNIST"
      path: "data/MNIST"
      split: "test"
      download: true
      transform: "basic"
      
    loader_params:
      batch_size: 128
      shuffle: false
      num_workers: 0

# 评估配置
evaluation:
  metrics: ["accuracy", "loss"]
  frequency: 1
  
  tasks:
    - evaluator: "client_accuracy_evaluator"
      test_data: "client_test_data"
      enabled: true

# 评估器配置
evaluators:
  client_accuracy_evaluator:
    evaluator:
      class: "accuracy"
      metrics: ["accuracy", "precision", "recall", "f1"]
      test_data: "client_test_data"

# Hook配置
hooks:
  enabled: true
  
  local_training_hook:
    enabled: true
    priority: 0
    
  evaluation_hook:
    enabled: true
    priority: 5
    
  communication_hook:
    enabled: true
    priority: 15

# 系统配置
system:
  device: "cpu"
  random_seed: 42
  num_threads: 2

# 日志配置 - 客户端1专用
logging:
  level: "INFO"
  save_logs: true
  log_dir: "logs/client_1"                 # 客户端1日志目录
  
  formatters:
    default: "[%(asctime)s][CLIENT-1][%(name)s][%(levelname)s] %(message)s"

# 实验配置
experiment:
  name: "client_1_experiment"
  description: "客户端1实验配置"
  output_dir: "experiments/client_1"
