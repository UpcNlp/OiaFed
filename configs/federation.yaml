# 联邦学习配置示例
federation:
  # 联邦模式配置
  mode: "pseudo"  # 可选: "real" | "pseudo"
  
  # 客户端管理配置
  client_management:
    max_clients: 100                    # 最大客户端数量
    client_timeout: 300                 # 客户端超时时间（秒）
    max_failures: 3                     # 最大故障次数
    selection_strategy: "random"        # 客户端选择策略: random, round_robin, capability_based
    
    # 客户端选择参数
    selection_params:
      min_clients_per_round: 5          # 每轮最少客户端数量
      max_clients_per_round: 20         # 每轮最多客户端数量
      participation_rate: 0.3           # 参与率
      
  # 本地训练器配置
  local_trainer:
    device: "cpu"                       # 计算设备
    learning_rate: 0.001                # 学习率
    batch_size: 32                      # 批次大小
    local_epochs: 1                     # 本地训练轮数
    optimizer: "adam"                   # 优化器类型: adam, sgd, adamw
    criterion: "cross_entropy"          # 损失函数: cross_entropy, mse, bce, l1
    weight_decay: 0.0001                # 权重衰减
    momentum: 0.9                       # 动量（SGD）
    
  # 模型管理配置
  model_management:
    device: "cpu"                       # 计算设备
    checkpoint_dir: "checkpoints/federation"  # 检查点目录
    save_frequency: 10                  # 保存频率（轮次）
    max_checkpoints: 20                 # 最大检查点数量
    
    # 模型压缩配置
    compression:
      enable: false                     # 是否启用压缩
      method: "top_k"                   # 压缩方法: top_k, quantization
      compression_ratio: 0.1            # 压缩比率
      
  # 聚合配置（依赖具体聚合器实现）
  aggregation:
    method: "fed_avg"                   # 聚合方法
    weighted: true                      # 是否使用加权聚合
    drop_stragglers: true               # 是否丢弃掉队者
    min_clients_for_aggregation: 3      # 聚合所需最少客户端数
    
  # 真联邦模式通信配置
  communication:
    protocol: "grpc"                    # 通信协议
    host: "localhost"                   # 服务器地址
    port: 8080                          # 服务器端口
    timeout: 30                         # 通信超时
    retry_attempts: 3                   # 重试次数
    
    # 安全配置
    security:
      enable_encryption: false          # 是否启用加密
      certificate_path: ""              # 证书路径
      
  # 监控和日志配置
  monitoring:
    enable_metrics: true                # 是否启用指标收集
    metrics_frequency: 1                # 指标收集频率
    log_level: "INFO"                   # 日志级别
    
    # 指标配置
    metrics:
      - "client_participation"          # 客户端参与度
      - "model_convergence"              # 模型收敛性
      - "communication_cost"             # 通信成本
      - "training_time"                  # 训练时间
