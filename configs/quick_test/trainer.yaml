# Trainer 节点配置
extend: base.yaml

node_id: trainer
role: trainer

# 监听端口
listen:
  host: localhost
  port: 50051

# 等待至少 4 个 learner 连接
min_peers: 4

# Trainer 配置
trainer:
  type: default
  args:
    max_rounds: 3
    local_epochs: 2
    client_fraction: 1.0
    min_available_clients: 2

    fit_config:
      epochs: 2
      evaluate_after_fit: true

    eval_interval: 2
    eval_config: {}
    evaluate_after_aggregation: false

# Aggregator 配置
aggregator:
  type: fedavg
  args:
    weighted: true

# Dataset 配置（可选，用于中心化评估）
dataset:
  type: mnist
  args:
    data_dir: ./data
    partition_id: 0
    num_partitions: 1
    partition_type: iid
    download: true
