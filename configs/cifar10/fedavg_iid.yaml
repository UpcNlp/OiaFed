# CIFAR-10 FedAvg 实验配置
# configs/cifar10/fedavg_iid.yaml

# 实验元信息
experiment_name: "CIFAR10_FedAvg_IID"
description: "CIFAR-10数据集上的FedAvg算法，IID数据划分"

# 节点角色和ID
role: local  # 本地模式（同时包含server和client配置）
node_id: "local_cifar10_fedavg"

# 通信配置
communication:
  mode: memory  # 使用Memory模式（单机模拟）

# 训练配置
training:
  # 训练参数
  max_rounds: 100
  min_clients: 3

  # 服务器端配置
  trainer:
    name: "Generic"
    params:
      local_epochs: 5
      learning_rate: 0.01
      batch_size: 64

  global_model:
    name: "CIFAR10_Simple"  # 使用简单模型进行快速实验
    params:
      num_classes: 10

  # 客户端配置
  learner:
    name: "Generic"
    params:
      model:
        name: "CIFAR10_Simple"
        params:
          num_classes: 10
      optimizer:
        type: "SGD"
        lr: 0.01
        momentum: 0.9
        weight_decay: 0.0005  # L2正则化
      loss: "CrossEntropyLoss"
      learning_rate: 0.01
      batch_size: 64
      local_epochs: 5

  dataset:
    name: "CIFAR10"
    params:
      root: "./data"
      train: true
      download: true
    partition:
      strategy: "iid"  # IID划分
      num_clients: 3
      seed: 42

# 客户端列表（Memory模式下的模拟客户端）
clients:
  num_clients: 3
