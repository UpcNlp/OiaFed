# 新统一日志系统测试 - Client 0 配置
# configs/test_logging/client_0.yaml

role: client
node_id: "client_0"

# ===== 新统一日志配置 =====
logging:
  # 实验名称（与 server 保持一致）
  experiment_name: "test_unified_logging"

  # Layer 1: Runtime Logs (Loguru)
  runtime:
    console_enabled: false   # Client 不显示控制台（避免混乱）
    console_level: "INFO"
    file_level: "DEBUG"

  # Layer 2: Training Progress (进度条)
  progress:
    enabled: false           # Client 不显示进度条

  # Layer 3: Experiment Tracking (MLflow)
  tracker:
    enabled: true            # Client 启用追踪（嵌套 run）
    type: "mlflow"
    config:
      # MLflow 远程服务器配置
      tracking_uri: "http://172.19.138.200:5000"

  # 是否收集 Loguru 日志作为 artifacts
  collect_loguru_artifacts: true

# ===== 通信配置 =====
communication:
  mode: memory
  server:
    host: "127.0.0.1"
    port: 8001

# ===== 训练配置 =====
training:
  learner:
    name: "fl.Generic"
    params:
      model:
        name: "MNIST_CNN"
        params:
          num_classes: 10
      optimizer:
        type: "SGD"
        lr: 0.01
        momentum: 0.9
      loss: "CrossEntropyLoss"
      learning_rate: 0.01
      batch_size: 64
      local_epochs: 1

  # 数据集配置
  dataset:
    name: "FMNIST"
    params:
      root: "./data"
      train: true
      download: true
    partition:
      strategy: "iid"
      num_clients: 2
      client_id: 0
      seed: 42
