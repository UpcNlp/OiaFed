# 服务端网络模式通信配置模板
# 适用于分布式部署的服务端

# ========== 部署配置 ==========
deployment:
  mode: "network"           # 通信模式：memory / process / network
  role: "server"            # 角色：server
  node_id: "main_server"    # 服务端ID（可自定义）

# ========== 传输层配置 ==========
transport:
  type: "websocket"         # 传输类型：tcp / websocket / grpc
  host: "0.0.0.0"           # 监听地址（0.0.0.0 表示监听所有网卡）
  port: 8000                # 监听端口
  timeout: 30.0             # 超时时间（秒）
  max_connections: 100      # 最大连接数

  # WebSocket 特定配置
  websocket_port: 9501      # WebSocket 端口（如果使用 WebSocket）

  # TLS/SSL 配置（可选）
  # tls:
  #   enabled: false
  #   cert_file: "/path/to/cert.pem"
  #   key_file: "/path/to/key.pem"

# ========== 通信管理配置 ==========
communication:
  # RPC 配置
  rpc:
    timeout: 120.0          # RPC 超时时间（秒）
    retry_attempts: 3       # 重试次数
    retry_delay: 5.0        # 重试延迟（秒）

  # 心跳配置
  heartbeat:
    interval: 30.0          # 心跳间隔（秒）
    timeout: 90.0           # 心跳超时（秒）

  # 序列化配置
  serialization:
    format: "pickle"        # 序列化格式：pickle / json / protobuf
    compression: "gzip"     # 压缩方式：none / gzip / lz4

# ========== 连接管理配置 ==========
connection:
  max_clients: 100          # 最大客户端数
  client_timeout: 300.0     # 客户端闲置超时（秒）

  # 断开连接策略
  disconnection_policy:
    action: "wait"          # 断开后的操作：wait / skip / terminate
    wait_timeout: 60.0      # 等待重连的时间（秒）
