```mermaid
sequenceDiagram
    participant EE as ExperimentEngine
    participant FE as FederationEngine
    participant FS as FederatedServer
    participant CM as ClientManager
    participant MM as ModelManager
    participant CommMgr as CommunicationManager
    participant FC1 as FederatedClient1
    participant FC2 as FederatedClient2
    participant LT1 as LocalTrainer1
    participant LT2 as LocalTrainer2
    participant BA as BaseAggregator
    participant EvE as EvaluationEngine
    
    Note over EE,EvE: 联邦学习轮次开始
    
    EE->>FE: start_federation_round(round_id)
    FE->>FS: coordinate_round(round_id)
    
    Note over FS,CM: 客户端选择阶段
    FS->>CM: select_clients_for_round(num_clients)
    CM->>CM: apply_selection_strategy()
    CM-->>FS: [client1_id, client2_id]
    
    Note over FS,MM: 模型准备阶段
    FS->>MM: get_current_model()
    MM-->>FS: global_model
    
    Note over FS,FC2: 模型广播阶段
    FS->>CommMgr: broadcast_global_model(model, clients)
    par 并行广播给选中的客户端
        CommMgr->>FC1: send_model(global_model)
        and
        CommMgr->>FC2: send_model(global_model)
    end
    
    Note over FC1,LT2: 本地训练阶段
    par 客户端并行训练
        FC1->>LT1: train_local_model(task_data)
        LT1->>LT1: execute_training_loop()
        LT1-->>FC1: local_update1
        and
        FC2->>LT2: train_local_model(task_data)
        LT2->>LT2: execute_training_loop()
        LT2-->>FC2: local_update2
    end
    
    Note over FC1,CommMgr: 更新上传阶段
    par 并行上传更新
        FC1->>CommMgr: send_update(local_update1)
        and
        FC2->>CommMgr: send_update(local_update2)
    end
    CommMgr->>FS: collect_all_updates()
    
    Note over FS,BA: 模型聚合阶段
    FS->>MM: aggregate_updates([update1, update2])
    MM->>BA: aggregate(client_updates)
    BA->>BA: compute_weighted_average()
    BA-->>MM: aggregated_model
    MM->>MM: update_global_model(aggregated_model)
    MM-->>FS: aggregation_complete
    
    Note over FS,EvE: 模型评估阶段
    FS->>EvE: evaluate_global_model(model, test_data)
    EvE->>EvE: compute_metrics()
    EvE-->>FS: evaluation_results
    
    FS-->>FE: round_results
    FE-->>EE: round_complete(metrics)
    
    Note over EE,EvE: 轮次结束，准备下一轮或完成实验