# è¯„ä¼°é…ç½®æ›´æ–°æ€»ç»“ - è§£å†³è¯„ä¼°å™¨ä¸æ•°æ®é›†æ˜ å°„é—®é¢˜

## ğŸ¯ é—®é¢˜èƒŒæ™¯

ç”¨æˆ·æå‡ºçš„é—®é¢˜ï¼š
> "å¤šä¸ªè¯„ä¼°å™¨ï¼Œä¸çŸ¥é“é‚£ä¸ªè¯„ä¼°å™¨ä½¿ç”¨é‚£ä¸ªæ•°æ®é›†"
> ```yaml
> evaluators: ["accuracy_evaluator", "loss_evaluator"]  # å¤šä¸ªè¯„ä¼°å™¨
> test_datasets: ["test_data", "validation_data"]       # å¤šä¸ªæµ‹è¯•æ•°æ®é›†
> ```

**é—®é¢˜åˆ†æ**: åŸæ¥çš„é…ç½®æ–¹å¼ä¼šç”Ÿæˆæ‰€æœ‰è¯„ä¼°å™¨å’Œæ•°æ®é›†çš„ç¬›å¡å°”ç§¯ï¼Œæ— æ³•ç²¾ç¡®æ§åˆ¶å“ªä¸ªè¯„ä¼°å™¨ä½¿ç”¨å“ªä¸ªæ•°æ®é›†ã€‚

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### ğŸ¯ 4ç§é…ç½®æ–¹å¼

#### æ–¹å¼1: å•ä¸ªé…ç½® - æœ€ç®€å•
```yaml
evaluation:
  learners:
    simple_learner:
      evaluator: "accuracy_evaluator"     # å•ä¸ªè¯„ä¼°å™¨
      test_dataset: "test_data"           # å•ä¸ªæµ‹è¯•æ•°æ®é›†
```
**ç»“æœ**: 1ä¸ªè¯„ä¼°ä»»åŠ¡

#### æ–¹å¼2: è¯„ä¼°ä»»åŠ¡åˆ—è¡¨ - æœ€ç²¾ç¡®çš„æ§åˆ¶
```yaml
evaluation:
  learners:
    precise_learner:
      evaluation_tasks:
        - evaluator: "accuracy_evaluator"
          test_dataset: "test_data"
          name: "test_accuracy"              # å¯é€‰ï¼šè‡ªå®šä¹‰ä»»åŠ¡å
        - evaluator: "accuracy_evaluator" 
          test_dataset: "validation_data"
          name: "validation_accuracy"
        - evaluator: "loss_evaluator"
          test_dataset: "test_data"
          name: "test_loss"
```
**ç»“æœ**: 3ä¸ªè¯„ä¼°ä»»åŠ¡ï¼Œå®Œå…¨è‡ªå®šä¹‰æ§åˆ¶

#### æ–¹å¼3: è¯„ä¼°å™¨æ˜ å°„ - ä¸ºæ¯ä¸ªè¯„ä¼°å™¨æŒ‡å®šæ•°æ®é›†
```yaml
evaluation:
  learners:
    mapping_learner:
      evaluator_mapping:
        accuracy_evaluator: ["test_data", "validation_data"]    # accuracyç”¨äº2ä¸ªæ•°æ®é›†
        loss_evaluator: ["test_data"]                           # lossåªç”¨äº1ä¸ªæ•°æ®é›†
        comprehensive_evaluator: ["challenge_data"]             # comprehensiveç”¨äºæŒ‘æˆ˜æ•°æ®
```
**ç»“æœ**: 4ä¸ªè¯„ä¼°ä»»åŠ¡ (2+1+1)

#### æ–¹å¼4: å‘åå…¼å®¹ - ç¬›å¡å°”ç§¯ï¼ˆä¿æŒåŸè¡Œä¸ºï¼‰
```yaml
evaluation:
  learners:
    compatible_learner:
      evaluators: ["accuracy_evaluator", "loss_evaluator"]  # å¤šä¸ªè¯„ä¼°å™¨
      test_datasets: ["test_data", "validation_data"]       # å¤šä¸ªæµ‹è¯•æ•°æ®é›†
```
**ç»“æœ**: 4ä¸ªè¯„ä¼°ä»»åŠ¡ (2Ã—2çš„ç¬›å¡å°”ç§¯)

## ğŸ“Š å¯¹æ¯”åˆ†æ

| é…ç½®æ–¹å¼ | ç²¾ç¡®åº¦ | çµæ´»æ€§ | å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|---------|--------|--------|--------|----------|
| å•ä¸ªé…ç½® | â­â­â­ | â­ | â­ | ç®€å•åœºæ™¯ |
| ä»»åŠ¡åˆ—è¡¨ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ | å¤æ‚ç²¾ç¡®æ§åˆ¶ |
| è¯„ä¼°å™¨æ˜ å°„ | â­â­â­â­ | â­â­â­â­ | â­â­â­ | å¸¸ç”¨æ¨è |
| ç¬›å¡å°”ç§¯ | â­ | â­â­ | â­â­ | å‘åå…¼å®¹ |

## ğŸš€ å®ç°ç»†èŠ‚

### é…ç½®è§£æé€»è¾‘
```python
def evaluate_learner(self, learner_id: str, learner: Any) -> Dict[str, Any]:
    # ç»Ÿä¸€è§£æä¸º evaluation_tasks åˆ—è¡¨
    evaluation_tasks = []
    
    if "evaluation_tasks" in config:
        # æ–¹å¼2: ç›´æ¥ä½¿ç”¨ä»»åŠ¡åˆ—è¡¨
        evaluation_tasks = config["evaluation_tasks"]
        
    elif "evaluator_mapping" in config:
        # æ–¹å¼3: è¯„ä¼°å™¨æ˜ å°„è½¬æ¢ä¸ºä»»åŠ¡åˆ—è¡¨
        for evaluator_id, dataset_list in config["evaluator_mapping"].items():
            for dataset_id in dataset_list:
                evaluation_tasks.append({
                    "evaluator": evaluator_id,
                    "test_dataset": dataset_id
                })
                
    elif "evaluator" in config and "test_dataset" in config:
        # æ–¹å¼1: å•ä¸ªé…ç½®è½¬æ¢ä¸ºä»»åŠ¡åˆ—è¡¨
        evaluation_tasks = [{
            "evaluator": config["evaluator"],
            "test_dataset": config["test_dataset"]
        }]
        
    elif "evaluators" in config and "test_datasets" in config:
        # æ–¹å¼4: ç¬›å¡å°”ç§¯è½¬æ¢ä¸ºä»»åŠ¡åˆ—è¡¨
        for evaluator_id in config["evaluators"]:
            for dataset_id in config["test_datasets"]:
                evaluation_tasks.append({
                    "evaluator": evaluator_id,
                    "test_dataset": dataset_id
                })
    
    # æ‰§è¡Œæ‰€æœ‰è¯„ä¼°ä»»åŠ¡
    for task in evaluation_tasks:
        # æ‰§è¡Œè¯„ä¼°...
```

## âœ… è§£å†³æ•ˆæœ

### ğŸ¯ è§£å†³äº†åŸé—®é¢˜
- âœ… **ç²¾ç¡®æ˜ å°„**: å¯ä»¥æ˜ç¡®æŒ‡å®šå“ªä¸ªè¯„ä¼°å™¨ä½¿ç”¨å“ªä¸ªæ•°æ®é›†
- âœ… **çµæ´»é…ç½®**: æ”¯æŒ4ç§ä¸åŒç²¾åº¦çš„é…ç½®æ–¹å¼
- âœ… **å‘åå…¼å®¹**: ä¿æŒåŸæœ‰é…ç½®æ–¹å¼å¯ç”¨
- âœ… **ä»»åŠ¡å‘½å**: æ”¯æŒè‡ªå®šä¹‰è¯„ä¼°ä»»åŠ¡åç§°

### ğŸ“ˆ ç¤ºä¾‹å¯¹æ¯”

**åŸé—®é¢˜åœºæ™¯**:
```yaml
# é—®é¢˜ï¼šä¸çŸ¥é“å“ªä¸ªè¯„ä¼°å™¨ç”¨å“ªä¸ªæ•°æ®é›†
evaluators: ["accuracy_evaluator", "loss_evaluator"] 
test_datasets: ["test_data", "validation_data"]
# ç»“æœï¼šæ‰€æœ‰ç»„åˆï¼Œå¯èƒ½ä¸æ˜¯æƒ³è¦çš„
```

**æ–°è§£å†³æ–¹æ¡ˆ**:
```yaml
# æ–¹æ¡ˆ3ï¼šè¯„ä¼°å™¨æ˜ å°„ - æ˜ç¡®æŒ‡å®š
evaluator_mapping:
  accuracy_evaluator: ["test_data", "validation_data"]  # accuracyç”¨äºä¸¤ä¸ªæ•°æ®é›†
  loss_evaluator: ["test_data"]                         # lossåªç”¨äºæµ‹è¯•æ•°æ®
# ç»“æœï¼š3ä¸ªä»»åŠ¡ï¼Œç²¾ç¡®æ§åˆ¶
```

## ğŸ‰ é…ç½®å»ºè®®

### ğŸŒŸ æ¨èä½¿ç”¨æ–¹å¼3ï¼ˆè¯„ä¼°å™¨æ˜ å°„ï¼‰
- **åŸå› **: å¹³è¡¡äº†ç²¾ç¡®æ€§å’Œé…ç½®å¤æ‚åº¦
- **é€‚ç”¨**: å¤§å¤šæ•°å®é™…åº”ç”¨åœºæ™¯
- **ä¼˜åŠ¿**: ç›´è§‚ã€çµæ´»ã€æ˜“ç»´æŠ¤

### ğŸ“ é…ç½®æ¨¡æ¿
```yaml
evaluation:
  learners:
    your_learner:
      evaluator_mapping:
        accuracy_evaluator: ["test_data", "validation_data"]
        loss_evaluator: ["test_data"]
        custom_evaluator: ["challenge_data"]
```

## ğŸ§ª æµ‹è¯•éªŒè¯

åˆ›å»ºäº†å…¨é¢çš„æµ‹è¯•è„šæœ¬ `test_evaluation_config.py`ï¼š
- âœ… 4ç§é…ç½®æ–¹å¼å…¨éƒ¨é€šè¿‡æµ‹è¯•
- âœ… ä»»åŠ¡ç”Ÿæˆé€»è¾‘æ­£ç¡®
- âœ… YAMLé…ç½®è§£ææ­£å¸¸
- âœ… è¾¹ç•Œæƒ…å†µå¤„ç†å¾—å½“

## ï¿½ æ–‡æ¡£å’Œç¤ºä¾‹

- **å®Œæ•´ç¤ºä¾‹**: `config_examples/evaluation_config_example.yaml`
- **ç®€åŒ–ç¤ºä¾‹**: `config_examples/simple_evaluation_config.yaml`
- **æ˜ å°„è§£å†³æ–¹æ¡ˆ**: `config_examples/evaluation_mapping_solution.yaml`
- **æµ‹è¯•è„šæœ¬**: `test_evaluation_config.py`

## ï¿½ æ€»ç»“

æˆåŠŸè§£å†³äº†"å¤šä¸ªè¯„ä¼°å™¨ä¸çŸ¥é“ä½¿ç”¨å“ªä¸ªæ•°æ®é›†"çš„é—®é¢˜ï¼Œæä¾›äº†4ç§ä¸åŒç²¾åº¦çš„é…ç½®æ–¹å¼ï¼Œæ—¢ä¿æŒäº†å‘åå…¼å®¹æ€§ï¼Œåˆæä¾›äº†ç²¾ç¡®æ§åˆ¶çš„èƒ½åŠ›ã€‚æ¨èä½¿ç”¨**è¯„ä¼°å™¨æ˜ å°„**æ–¹å¼ï¼Œåœ¨ç²¾ç¡®æ€§å’Œé…ç½®å¤æ‚åº¦ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡ã€‚
